<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- jQuery first -->
    <script src="js/jquery-3.6.3.min.js"></script>
    <!-- Bootstrap CSS and JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/pages/absensi-modern.css" />
    <!-- Favicon -->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Return Barang - Melati Gold Shop</title>
    <style>
      .modal-xl {
        max-width: 400px;
      }
      .modal .table tbody tr:hover {
        background-color: #f8f9fa;
        cursor: pointer;
      }
      .is-invalid {
        border-color: #dc3545;
      }
      .invalid-feedback {
        display: block;
        color: #dc3545;
      }
      .modal-xl {
    max-width: 400px;
  }
  .modal .table tbody tr:hover {
    background-color: #f8f9fa;
    cursor: pointer;
  }
  .is-invalid {
    border-color: #dc3545;
  }
  .invalid-feedback {
    display: block;
    color: #dc3545;
  }
  /* CSS baru untuk fitur hapus */
  .btn-delete-return {
    padding: 2px 6px;
    font-size: 12px;
  }
  .action-column {
    width: 80px;
    text-align: center;
  }
  #detailHapusData {
    background-color: #f8f9fa;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
  }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <img src="img/Melati.jfif" alt="Logo" class="logo" />
          <h1 class="brand-name">Melati Gold Young</h1>
        </div>
        <div class="sidebar-menu">
          <ul class="nav flex-column" id="sidebarAccordion">
            <li class="nav-item">
              <a class="nav-link" href="dashboard.html">
                <i class="fas fa-tachometer-alt"></i>
                <span class="menu-text">Dashboard</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="buyback.html">
                <i class="fas fa-exchange-alt"></i>
                <span class="menu-text">Buyback</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="manajemenStok.html">
                <i class="fa-solid fa-boxes-stacked"></i>
                <span class="menu-text">Manajemen Stok</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="mutasiKode.html">
                <i class="fa-solid fa-calendar-xmark"></i>
                <span class="menu-text">Mutasi Kode</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="maintenance.html">
                <i class="fas fa-tools"></i>
                <span class="menu-text">Maintenance</span>
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link collapsed"
                href="#"
                data-bs-toggle="collapse"
                data-bs-target="#antrianSubmenu"
                aria-expanded="false"
              >
                <i class="fas fa-ticket-alt"></i>
                <span class="menu-text">Antrian</span>
                <i class="fas fa-angle-down ms-auto submenu-icon"></i>
              </a>
              <div class="collapse" id="antrianSubmenu" data-bs-parent="#sidebarAccordion">
                <ul class="nav flex-column ms-3">
                  <li class="nav-item">
                    <a class="nav-link" href="admin.html">
                      <i class="fas fa-user-cog"></i>
                      <span class="menu-text">Admin Antrian</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="display.html">
                      <i class="fas fa-desktop"></i>
                      <span class="menu-text">Display Antrian</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="analisis.html">
                      <i class="fas fa-chart-bar"></i>
                      <span class="menu-text">Laporan Antrian</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a
                class="nav-link collapsed"
                href="#"
                data-bs-toggle="collapse"
                data-bs-target="#aksesorisSubmenu"
                aria-expanded="false"
              >
                <i class="fas fa-gem"></i>
                <span class="menu-text">Aksesoris</span>
                <i class="fas fa-angle-down ms-auto submenu-icon"></i>
              </a>
              <div class="collapse" id="aksesorisSubmenu" data-bs-parent="#sidebarAccordion">
                <ul class="nav flex-column ms-3">
                  <li class="nav-item">
                    <a class="nav-link" href="tambahAksesoris.html">
                      <i class="fas fa-plus-circle"></i>
                      <span class="menu-text">Tambah Aksesoris</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="dataPenjualan.html">
                      <i class="fas fa-shopping-cart"></i>
                      <span class="menu-text">Penjualan Aksesoris</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="return.html">
                      <i class="fa-solid fa-right-from-bracket"></i>
                      <span class="menu-text">Return Aksesoris</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="laporanPenjualan.html">
                      <i class="fas fa-chart-line"></i>
                      <span class="menu-text">Laporan Penjualan</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="laporanStok.html">
                      <i class="fas fa-boxes"></i>
                      <span class="menu-text">Laporan Stok</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <div class="sidebar-footer">
          <p>Â© 2025 Melati Gold Shop</p>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Top Navigation -->
        <header class="top-nav">
          <div class="menu-toggle d-md-flex d-none">
            <i class="fa-solid fa-minimize"></i>
          </div>
          <div class="hamburger d-md-none d-flex">
            <i class="fas fa-bars"></i>
          </div>
          <div class="nav-right">
            <div class="date-time">
              <div class="current-date" id="current-date"></div>
              <div class="current-time" id="current-time"></div>
            </div>
            <div class="user-profile dropdown">
              <div class="profile-img" data-bs-toggle="dropdown" aria-expanded="false">
                <span class="user-avatar">M</span>
              </div>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <button class="dropdown-item" id="logoutBtn" onclick="handleLogout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </header>

        <!-- Page Content -->
        <div class="page-content">
          <div class="page-header">
            <h1>Return Barang</h1>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="dashboard.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Return Barang</li>
              </ol>
            </nav>
          </div>

          <div class="content-wrapper">
            <!-- Form Return -->
            <div class="card mb-4">
              <div class="card-header">
                <h2>
                  <i class="fas fa-undo"></i>
                  Input Return
                </h2>
              </div>
              <div class="card-body">
                <form class="row g-3">
                  <div class="col-md-3">
                    <label for="tanggalReturn" class="form-label">Tanggal Return</label>
                    <input type="date" class="form-control" id="tanggalReturn" required />
                  </div>
                  <div class="col-md-3">
                    <label for="sales" class="form-label">Kasir</label>
                    <input type="text" class="form-control" id="sales" placeholder="Masukkan nama sales" required />
                  </div>
                  <div class="col-md-3">
                    <label for="jenisReturn" class="form-label">Jenis Return</label>
                    <select class="form-select" id="jenisReturn" required>
                      <option value="">Pilih Jenis</option>
                      <option value="kotak">Kotak</option>
                      <option value="aksesoris">Aksesoris</option>
                    </select>
                  </div>
                  <div class="col-md-3 d-flex align-items-end">
                    <button type="button" class="btn btn-primary" id="btnPilihBarang">
                      <i class="fas fa-plus me-2"></i>
                      Pilih Barang
                    </button>
                  </div>
                </form>
              </div>
            </div>

            <!-- Detail Return -->
            <div class="card mb-4">
              <div class="card-header">
                <h2>
                  <i class="fas fa-list"></i>
                  Detail Return
                </h2>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover" id="tableReturn">
                    <thead class="table-light">
                      <tr>
                        <th>Kode</th>
                        <th>Nama Barang</th>
                        <th>Jumlah Return</th>
                        <th>Keterangan</th>
                        <th>Aksi</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Data return akan ditampilkan di sini -->
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="card-footer">
                <button class="btn btn-primary" id="btnSimpanReturn">
                  <i class="fas fa-save me-2"></i>
                  Simpan Return
                </button>
                <button class="btn btn-secondary" id="btnBatal">
                  <i class="fas fa-times me-2"></i>
                  Batal
                </button>
              </div>
            </div>

            <!-- Riwayat Return -->
            <div class="card mb-4">
              <div class="card-header">
                <h2>
                  <i class="fas fa-history"></i>
                  Riwayat Return
                </h2>
              </div>
              <div class="card-body">
                <div class="row mb-3">
                  <div class="col-md-3">
                    <label for="filterDate" class="form-label">Pilih Tanggal</label>
                    <div class="input-group">
                      <input type="date" class="form-control" id="filterDate" />
                    </div>
                  </div>
                  <div class="col-md-4 d-flex align-items-end gap-2">
                    <button class="btn btn-primary" id="btnTampilkan">
                      <i class="fas fa-search me-2"></i>
                      Tampilkan
                    </button>
                    <button class="btn btn-success" id="btnPrintLaporan">
                      <i class="fas fa-print me-2"></i>
                      Print Laporan
                    </button>
                  </div>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-hover" id="tableRiwayatReturn">
                    <thead class="table-light">
                      <tr>
                        <th>Tanggal</th>
                        <th>Kasir</th>
                        <th>Jenis Return</th>
                        <th>Kode</th>
                        <th>Nama Barang</th>
                        <th>Jumlah</th>
                        <th>Keterangan</th>
                        <th class="action-column">Aksi</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Data riwayat return akan ditampilkan di sini -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Modal Konfirmasi Hapus -->
    <div
      class="modal fade"
      id="modalKonfirmasiHapus"
      tabindex="-1"
      aria-labelledby="modalKonfirmasiHapusLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="modalKonfirmasiHapusLabel">
              <i class="fas fa-exclamation-triangle me-2"></i>
              Konfirmasi Hapus Data Return
            </h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="alert alert-warning">
              <i class="fas fa-warning me-2"></i>
              <strong>Peringatan!</strong>
              Data yang dihapus tidak dapat dikembalikan.
            </div>
            <p>Anda akan menghapus data return dengan detail:</p>
            <ul id="detailHapusData">
              <!-- Detail data akan ditampilkan di sini -->
            </ul>
            <div class="mb-3">
              <label for="passwordHapus" class="form-label">
                <i class="fas fa-lock me-2"></i>
                Masukkan Password untuk Konfirmasi:
              </label>
              <input type="password" class="form-control" id="passwordHapus" placeholder="Masukkan password" required />
              <div class="invalid-feedback" id="passwordError"></div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              <i class="fas fa-times me-2"></i>
              Batal
            </button>
            <button type="button" class="btn btn-danger" id="btnKonfirmasiHapus">
              <i class="fas fa-trash me-2"></i>
              Hapus Data
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Pilih Barang -->
    <div
      class="modal fade"
      id="modalPilihBarang"
      tabindex="-1"
      aria-labelledby="modalPilihBarangLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="modalPilihBarangLabel">
              <i class="fas fa-search me-2"></i>
              Pilih Barang
            </h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row mb-3">
              <div class="col-md-6">
                <div class="input-group">
                  <span class="input-group-text bg-light">
                    <i class="fas fa-search text-muted"></i>
                  </span>
                  <input type="text" class="form-control" id="searchBarang" placeholder="Cari kode..." />
                </div>
              </div>
            </div>
            <div class="table-responsive" style="max-height: 450px">
              <table class="table table-hover table-striped" id="tableBarang">
                <thead class="table-dark sticky-top">
                  <tr>
                    <th>Kode</th>
                    <th>Nama</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Data barang akan ditampilkan di sini -->
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer bg-light">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              <i class="fas fa-times me-2"></i>
              Tutup
            </button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/return.js"></script>
  </body>
</html>
